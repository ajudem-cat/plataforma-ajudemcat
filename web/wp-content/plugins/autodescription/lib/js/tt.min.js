'use strict';window.tsfTT=function(a){const b=()=>{let b=0,f=!1,g=!1;try{let a=Object.defineProperty({},"passive",{get:()=>{g=!0}});window.addEventListener("tsf-tt-test-passive",a,a).removeEventListener("tsf-tt-test-passive",a,a)}catch(a){}const h=()=>{f=!0,clearTimeout(b),b=setTimeout(()=>{f=!1},250)},i=(b,c)=>{c=c||!1;let d=a(b);c?(d.off("mousemove.tsfTT mouseleave.tsfTT mouseout.tsfTT blur.tsfTT"),a(document.body).off("pointerdown.tsfTT touchstart.tsfTT click.tsfTT")):(d.on({"mousemove.tsfTT":m,"mouseleave.tsfTT":n,"mouseout.tsfTT":n,"blur.tsfTT":n}),a(document.body).off("pointerdown.tsfTT touchstart.tsfTT click.tsfTT").on("pointerdown.tsfTT touchstart.tsfTT click.tsfTT",o)),d.off("tsf-tooltip-update").on("tsf-tooltip-update",k)},j=a=>{i(a,!0)},k=b=>{if(b.target.classList.contains("tsf-tooltip-item")){let c=b.target.querySelector(".tsf-tooltip-text");c instanceof Element&&(c.innerHTML=b.target.dataset.desc,a(b.target).trigger("mousemove.tsfTT"))}},l=a=>{let b=a.target.dataset.desc||a.target.title||"";b&&!a.target.getElementsByClassName("tsf-tooltip").length&&(a.target.dataset.desc=b,a.target.removeAttribute("title"),c(a,a.target,b))},m=a=>{var b=Math.round;let c=a.target.querySelector(".tsf-tooltip");if(!c)return;let d=c.querySelector(".tsf-tooltip-arrow"),e=a&&a.pageX||NaN;a&&"focus"===a.type?e=a.target.getBoundingClientRect().left+a.target.offsetWidth/2:isNaN(e)&&(e=c.dataset.lastPagex||a.target.getBoundingClientRect().left),c.dataset.lastPagex=e;let f=a.target.closest(".tsf-tooltip-wrap")||a.target.parentNode,g=e-f.getBoundingClientRect().left-8,h=c.querySelector(".tsf-tooltip-text-wrap"),i=h.offsetWidth,j=c.dataset.adjust,k=i-16-7;if(j=parseInt(j,10),j=isNaN(j)?0:b(j),j&&(g-=j,k+j>f.offsetWidth)){let a=h.querySelector(".tsf-tooltip-text"),b=a.offsetWidth;k=b-16-7}d.style.left=7>=g?"7px":g>=k?k+"px":g+"px"},n=a=>{f||(e(a.target),j(a.target))},o=b=>{h();let c;if(b.target.classList.contains("tsf-tooltip-item")&&(c=b.target.querySelector(".tsf-tooltip")),!c){let d=a(b.target).children(".tsf-tooltip-item");d&&(c=d.find(".tsf-tooltip"))}c?a(".tsf-tooltip").not(c).remove():a(".tsf-tooltip").remove()},p=a=>{if(f)return;let b=!1;switch(a.type){case"mouseenter":break;case"pointerdown":case"touchstart":b=!0;break;case"focus":default:}b&&o(a),l(a),m(a),i(a.target)};let q=!1;const r=a=>{q||(q=!0,a.target.classList.contains("tsf-tooltip-item")&&p(a),a.stopPropagation(),q=!1)},s=()=>{let a=document.querySelectorAll(".tsf-tooltip-wrap"),b=!g||{capture:!0,passive:!0};for(let c=0;c<a.length;c++)["mouseenter","pointerdown","touchstart","focus"].forEach(d=>{a[c].removeEventListener(d,r,b),a[c].addEventListener(d,r,b)})};s(),a(window).on("tsf-tooltip-reset",s),d("#wpwrap")},c=(b,c,d)=>{var f=Math.min;if(c instanceof a&&(c=c.get(0)),c.querySelector(".tsf-tooltip")&&e(c),!d.length)return;let g=document.createElement("div");g.classList.add("tsf-tooltip"),g.insertAdjacentHTML("afterbegin",`<span class="tsf-tooltip-text-wrap"><span class="tsf-tooltip-text">${d}</span></span><div class="tsf-tooltip-arrow" style=will-change:left></div>`),c.prepend(g);let h=c.closest(".tsf-tooltip-boundary")||document.body,i=h.getBoundingClientRect(),j=i.top-(h.scrollTop||0),k=h.offsetWidth,l=12,m=c.closest(".tsf-tooltip-wrap")||c.parentElement,n=m.getBoundingClientRect(),o=g.querySelector(".tsf-tooltip-text-wrap"),p=o.getBoundingClientRect(),q=n.width;250<p.width&&250>q&&150<q&&(o.style.flexBasis=q+"px"),o.offsetWidth>k-l/2?(o.style.flexBasis=f(250,k-l)+"px",l/=2):250<p.width&&(o.style.flexBasis="250px");let r=i.left-(h.scrollLeft||0),s=r+k,t=o.offsetWidth,u=p.left,v=u+t,w=0;if(u<r)w=r-u+l;else if(v>s)w=s-u-t-l;else if(42>q)w=-q/2-l;else if(q>t){let a=b&&b.pageX||NaN;w=b&&"focus"===b.type?q/2-t/2:isNaN(a)?-l:a-n.left-t/2;let c=-l,d=q-t+l;w<c&&(w=c),w>d&&(w=d)}if(w+u<r+l){let a=w+u-(r+l/2);w-=a}if(w+v>s+l){let a=w+v-(s+l/2);w-=a}if(w+u<r&&(w=0),!b){let a=parseInt(o.style.flexBasis,10);w<-a&&(w=-a)}g.style.left=w+"px",g.dataset.adjust=w;let x=c.offsetHeight+8,y=g.getBoundingClientRect().top-x;j>y?(g.classList.add("tsf-tooltip-down"),g.style.top=x+"px"):g.style.bottom=x+"px"},d=b=>{a(b).addClass("tsf-tooltip-boundary")},e=a=>{f(a).remove()},f=b=>a(b).find(".tsf-tooltip").first();return Object.assign({load:()=>{a(document.body).ready(b)}},{doTooltip:c,removeTooltip:e,getTooltip:f,addBoundary:d,triggerReset:()=>{a(window).trigger("tsf-tooltip-reset")},triggerUpdate:b=>{a(b||".tsf-tooltip-item").trigger("tsf-tooltip-update")}})}(jQuery),jQuery(window.tsfTT.load);
