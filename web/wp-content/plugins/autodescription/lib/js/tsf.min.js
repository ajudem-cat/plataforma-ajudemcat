'use strict';window.tsf=function(a){const b="undefined"!=typeof tsfL10n&&tsfL10n;let c;const d=()=>{if(void 0===c){try{new DOMParser().parseFromString("","text/html")&&(c=!0)}catch(a){}c=!!c}return c},f=a=>{if(!a.length)return"";let b={"&":"&#x26;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","\\":"&#x5C;","/":"&#x2F;"};return a.replace(/[&<>"'\\\/]/g,a=>b[a])},g=a=>a.replace(/&amp;|&#x0{0,3}26;|&#38;/gi,"&"),h=b=>{a(b.target).parents(".tsf-notice").slideUp(200,function(){this.remove()})},i=()=>{let b;if(b=a(".postbox[id^=\"autodescription-\"], .postbox#tsf-inpost-box").find(".hndle, .handlediv"),!b||!b.length)return;let c;const d=()=>{c[0].reportValidity()},e=b=>{let e=a(b.target).closest(".postbox");e[0].classList.contains("closed")&&(c=e.find("input:invalid, select:invalid, textarea:invalid"),c.length&&(a(document).one("postbox-toggled",d),a(b.target).trigger("click")))};b.on("click.tsfPostboxes",e)},j=()=>{a(document.body).trigger("tsf-ready")},k=()=>{a(document.body).trigger("tsf-onload")},l=()=>{k(),i(),j()};return Object.assign({load:()=>{a(".tsf-dismiss").on("click",h),a(document.body).ready(l)}},{stripTags:a=>a.length&&a.replace(/(<([^>]+)?>?)/ig,"")||"",decodeEntities:a=>{if(!a.length)return"";let b={"<":"&#x3C;",">":"&#x3E;","\\":"&#x5C;"};if(a=a.replace(/[<>\\]/g,a=>b[a]),d())a=new DOMParser().parseFromString(a,"text/html").documentElement.textContent;else{let b=document.createElement("span");b.innerHTML=a,a=g(b.textContent)}return a},escapeString:f,ampHTMLtoText:g,sDoubleSpace:a=>a.replace(/\s\s+/g," "),getStringLength:a=>{let b,c=0;return a.length&&(b=document.createElement("span"),b.innerHTML=f(a).trim(),"undefined"!=typeof b.childNodes[0]&&(c=b.childNodes[0].nodeValue.length)),+c},selectByValue:(a,b)=>{if(!a instanceof HTMLSelectElement)return;let c;for(let d=0;d<a.options.length;++d)if(b==a.options[d].value){c=d;break}if(void 0===c)for(let d=0;d<a.options.length;++d)if(b==a.options[d].innerHTML){c=d;break}void 0!==c&&(a.selectedIndex=c)},convertJSONResponse:a=>{let b=a&&a.json||void 0,c=1===b;if(!c){let b=a;try{a=JSON.parse(a),c=!0}catch(a){c=!1}c||(a=b)}return a},setAjaxLoader:b=>{a(b).toggleClass("tsf-loading")},unsetAjaxLoader:(b,c)=>{let d="tsf-success",e=2500;c||(d="tsf-error",e=5e3),a(b).removeClass("tsf-loading").addClass(d).fadeOut(e)},resetAjaxLoader:b=>{a(b).stop().empty().prop("class","tsf-ajax").css("opacity","1").removeProp("style")}},{l10n:b})}(jQuery),jQuery(window.tsf.load);
