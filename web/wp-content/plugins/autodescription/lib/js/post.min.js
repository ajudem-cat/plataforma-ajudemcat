'use strict';window.tsfPost=function(a){const b="undefined"!=typeof tsfPostL10n&&tsfPostL10n,c=(b,c)=>{let d=a(b.target);if(!d.is(":checked"))return;c="boolean"==typeof c&&c;let e=b.target.id,f=b.target.name,g="tsf-flex-tab-content-active",h="tsf-flex-tab-active",i=a("."+g),j=d.closest(".tsf-flex-nav-tab-wrapper").find("."+h),k=i.find("input:invalid, select:invalid, textarea:invalid");if(k.length)return k[0].reportValidity(),j.prop("checked",!0),d.prop("checked",!1),b.stopPropagation(),b.preventDefault(),!1;let l=a("#"+e+"-content");if(j.removeClass(h),j.siblings("label").removeClass("tsf-no-focus-ring"),d.addClass(h),c){let b=a("."+f+"-content");b.removeClass(g).hide(),l.addClass(g).show(),a("#"+e).trigger("tsf-flex-tab-toggled")}else if(l.length&&!l.is(i)){let b=a("."+f+"-content");b.fadeOut(150,function(){a(this).removeClass(g)}),setTimeout(()=>{l.addClass(g).fadeIn(250)},150),setTimeout(()=>{a("#"+e).trigger("tsf-flex-tab-toggled")},175)}},d=()=>{if(!a(".tsf-flex").length)return;let b=0,c={},d=0,e=a(".tsf-flex-nav-tab-wrapper"),f=a(".tsf-flex-nav-tab-inner"),g=a(".tsf-flex-nav-name");if(e.length){a(window).on("tsf-flex-resize",()=>{clearTimeout(b);let a=0;b=setTimeout(()=>{let b=e.width(),d=f.width();c.tabWrapper||(c.tabWrapper={},c.tabWrapper.outer=0,c.tabWrapper.inner=0,c.tabWrapper.shown=1),!c.tabWrapper.shown&&c.tabWrapper.outer<b&&(g.fadeIn(250),setTimeout(()=>{d=f.width()},a)),setTimeout(()=>{d>b?(g.hide(),c.tabWrapper.shown=0):c.tabWrapper.outer<b&&(g.fadeIn(250),c.tabWrapper.shown=1)},2*a),setTimeout(()=>{c.tabWrapper.outer=b,c.tabWrapper.inner=d},3*a)},d),a=10,d=75});const h=()=>{a(window).trigger("tsf-flex-resize")};a(window).on("resize orientationchange",h),a("#collapse-menu").on("click",h),a(".columns-prefs :input[type=radio]").on("change",h),a(".meta-box-sortables").on("sortupdate",h),h()}},e=a=>{a.currentTarget.classList.add("tsf-no-focus-ring")},f=()=>{a(".tsf-flex-nav-tab-radio:checked").trigger("change",[!0])},g=()=>{let b=a("#autodescription_canonical");if(!b)return;const c=a=>{b.attr("placeholder",a)};a(document).on("tsf-updated-gutenberg-link",(a,b)=>c(b))},h=()=>{tsfTitle.setInputElement(document.getElementById("autodescription_title")),tsfTitle.updateState("allowReferenceChange",!b.params.refTitleLocked);const c=tsf.escapeString(b.i18n.protectedTitle),d=tsf.escapeString(b.i18n.privateTitle);a("#autodescription_title_no_blogname").on("change",c=>{let d=tsfTitle.getState("useTagline"),e=!a(c.target).is(":checked");b.params.additionsForcedDisabled?e=!1:b.params.additionsForcedEnabled&&(e=!0),d!==e&&tsfTitle.updateState("useTagline",e)}),a("#autodescription_title_no_blogname").trigger("change");const e=a=>{let b=tsfTitle.getState("prefixValue"),e="";switch(a){case"password":e=c;break;case"private":e=d;break;default:case"public":e="";}e!==b&&tsfTitle.updateState("prefixValue",e)};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>e(b));a("#visibility .save-post-visibility").on("click",()=>{let b=a("#visibility").find("input:radio:checked").val();if("password"===b){let c=a("#visibility").find("#post_password").val();c&&c.length||(b="public")}e(b)}),b.states.isPrivate?e("private"):b.states.isProtected&&e("password");const f=a=>{a="string"==typeof a&&a.trim()||"";let c=b.params.stripTitleTags?tsf.stripTags(a):a;c=c||tsfTitle.untitledTitle,tsfTitle.updateState("defaultTitle",c)};b.params.isFront||(a("#titlewrap #title").on("input",a=>f(a.target.value)),a(document).on("tsf-updated-gutenberg-title",(a,b)=>f(b))),tsfTitle.enqueueUnregisteredInputTrigger()},i=()=>{tsfDescription.setInputElement(document.getElementById("autodescription_description")),tsfDescription.updateState("allowReferenceChange",!b.params.refDescriptionLocked),tsfDescription.enqueueUnregisteredInputTrigger()},j=()=>{const b=()=>{tsfTitle.enqueueUnregisteredInputTrigger(),tsfDescription.enqueueUnregisteredInputTrigger()};a(document).on("postbox-toggled",function(a,c){if("tsf-inpost-box"===c.id){let a=c.querySelector(".inside");0<a.offsetHeight&&0<a.offsetWidth&&b()}}),a("#tsf-flex-inpost-tab-general").on("tsf-flex-tab-toggled",b),a(window).on("tsf-flex-resize",b)},k=()=>{b.states.isGutenbergPage&&(tsfTT.addBoundary("#editor"),a(document).on("tsf-gutenberg-sidebar-opened",()=>{tsfTT.addBoundary(".edit-post-sidebar .components-panel")}))},l=()=>{if(!b.states.isGutenbergPage)return;const c=document.querySelector(".tsf-seo-bar"),d=document.querySelector("#tsf-doing-it-right-wrap .tsf-ajax"),e=document.getElementById("autodescription_description"),f=document.getElementById("autodescription_og_description"),g=document.getElementById("autodescription_twitter_description"),h=document.getElementById("autodescription_socialimage-url"),i={seobar:!!c,metadescription:!!e,ogdescription:!!f,twdescription:!!g,imageurl:!!h},j=b=>{switch(b=tsf.convertJSONResponse(b),b.type){case"success":const i=75;setTimeout(()=>{tsfDescription&&tsfDescription.updateState("defaultDescription",tsf.escapeString(b.data.metadescription.trim())),tsfSocial&&(tsfSocial.updateState("ogDescPlaceholder",tsf.escapeString(b.data.ogdescription.trim())),tsfSocial.updateState("twDescPlaceholder",tsf.escapeString(b.data.twdescription.trim()))),a(e).attr("placeholder",b.data.metadescription).trigger("input"),a(f).attr("placeholder",b.data.ogdescription).trigger("input"),a(g).attr("placeholder",b.data.twdescription).trigger("input"),a(h).attr("placeholder",b.data.imageurl).trigger("change"),tsfAys&&tsfAys.reset()},i),a(c).fadeOut(i,()=>{d&&tsf.unsetAjaxLoader(d,!0)}).html(b.data.seobar).fadeIn(500,tsfTT.triggerReset);break;case"failure":d&&tsf.unsetAjaxLoader(d,!1);break;default:d&&tsf.resetAjaxLoader(d);}},k=()=>{d&&tsf.unsetAjaxLoader(d,!1)};a(window).on("tsf-gutenberg-onsave",()=>{d&&tsf.resetAjaxLoader(d),d&&tsf.setAjaxLoader(d);let c={method:"POST",url:ajaxurl,datatype:"json",data:{action:"the_seo_framework_update_post_data",nonce:tsf.l10n.nonces.edit_posts,post_id:b.states.id,get:i},async:!0,timeout:7e3,success:j,error:k};a.ajax(c)})},m=()=>{g(),h(),i(),j()},n=()=>{f(),d(),k(),l(),tsfSocial.initTitleInputs({ref:document.getElementById("tsf-title-reference"),meta:document.getElementById("autodescription_title"),og:document.getElementById("autodescription_og_title"),tw:document.getElementById("autodescription_twitter_title")}),tsfSocial.initDescriptionInputs({ref:document.getElementById("tsf-description-reference"),meta:document.getElementById("autodescription_description"),og:document.getElementById("autodescription_og_description"),tw:document.getElementById("autodescription_twitter_description")})};return Object.assign({load:()=>{a(document.body).on("tsf-onload",m),a(document.body).on("tsf-ready",n),a(".tsf-flex-nav-tab-radio").on("change",c),a(".tsf-flex-nav-tab-wrapper").on("click.tsfFlexNav",".tsf-flex-nav-tab-label",e)}},{},{l10n:b})}(jQuery),jQuery(window.tsfPost.load);
