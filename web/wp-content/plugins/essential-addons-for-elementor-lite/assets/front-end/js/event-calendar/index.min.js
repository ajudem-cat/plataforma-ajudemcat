var EventCalendar=function(e,d){var a=FullCalendar.Calendar,t=d(".eael-event-calendar-cls",e),o=d(".eaelec-modal-close",e).eq(0),s=d("#eaelecModal",e),m=t.data("events"),n=t.data("first_day"),l=t.data("cal_id"),r=t.data("locale"),Y=t.data("defaultview"),i=new a(document.getElementById("eael-event-calendar-"+l),{plugins:["dayGrid","timeGrid","list"],editable:!1,selectable:!1,draggable:!1,firstDay:n,eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short"},nextDayThreshold:"00:00:00",header:{left:"prev,next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth,listWeek"},allDayText:"All day",events:m,selectHelper:!0,locale:r,eventLimit:3,defaultView:Y,eventRender:function(e){var a=d(e.el),r=e.event;a.attr("href","javascript:void(0);"),a.click(function(e){e.preventDefault(),e.stopPropagation();var a=r.start,t="h:mm A",o=r.end,m=d("span.eaelec-event-date-start"),n=d("span.eaelec-event-date-end");"yes"===r.allDay&&(o=moment(o).subtract(1,"days")._d,t=" ");if(m.html(" "),n.html(" "),s.addClass("eael-ec-popup-ready").removeClass("eael-ec-modal-removing"),"yes"===r.allDay&&moment(a).format("MM-DD-YYYY")===moment(o).format("MM-DD-YYYY")){var l=moment(a).format("MMM Do");!0===moment(a).isSame(Date.now(),"day")?l="Today":moment(a).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&(l="Tomorrow"),m.html('<i class="eicon-calendar"></i> '+l)}else!0===moment(r.start).isSame(Date.now(),"day")&&m.html('<i class="eicon-calendar"></i> Today '+moment(r.start).format(t)),moment(a).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&m.html('<i class="eicon-calendar"></i> Tomorrow '+moment(r.start).format(t)),(moment(a).format("MM-DD-YYYY")<moment(new Date).format("MM-DD-YYYY")||moment(a).format("MM-DD-YYYY")>moment(new Date).add(1,"days").format("MM-DD-YYYY"))&&m.html('<i class="eicon-calendar"></i> '+moment(r.start).format("MMM Do "+t)),!0===moment(o).isSame(Date.now(),"day")&&(!0!==moment(a).isSame(Date.now(),"day")?n.html("- Today "+moment(o).format(t)):n.html("- "+moment(o).format(t))),moment(a).format("MM-DD-YYYY")!==moment(new Date).add(1,"days").format("MM-DD-YYYY")&&moment(o).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&n.html("- Tomorrow "+moment(o).format(t)),moment(a).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&moment(o).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&n.html("- "+moment(o).format(t)),0<moment(o).diff(moment(a),"days")&&n.text().trim().length<1&&n.html("- "+moment(o).format("MMM Do "+t)),moment(a).format("MM-DD-YYYY")===moment(o).format("MM-DD-YYYY")&&n.html("- "+moment(o).format(t));d(".eaelec-modal-header h2").html(r.title),d(".eaelec-modal-body p").html(r.extendedProps.description),r.extendedProps.description.length<1?d(".eaelec-modal-body").css("height","auto"):d(".eaelec-modal-body").css("height","300px"),d(".eaelec-modal-footer a").attr("href",r.url),"on"===r.extendedProps.external&&d(".eaelec-modal-footer a").attr("target","_blank"),"on"===r.extendedProps.nofollow&&d(".eaelec-modal-footer a").attr("rel","nofollow"),""==r.url&&d(".eaelec-modal-footer a").css("display","none"),d(".eaelec-modal-header").css("border-left","5px solid "+r.borderColor)})}});o.on("click",function(){event.stopPropagation(),s.addClass("eael-ec-modal-removing").removeClass("eael-ec-popup-ready")}),d(document).on("click",function(e){e.target.closest(".eaelec-modal-content")||s.hasClass("eael-ec-popup-ready")&&s.addClass("eael-ec-modal-removing").removeClass("eael-ec-popup-ready")}),i.render()};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/eael-event-calendar.default",EventCalendar)});